<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title> Home </title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" th:href="@{/css/home.css}" />
</head>

<body>
<!-- Header -->
<div th:replace="fragments/header :: header"></div>

<!-- Hero Banner -->
<div class="hero-banner">
    <img src="/images/NhaGiaTien.png" alt="Featured Movie" class="hero-image">
    <img src="/images/DarkNun.png" alt="Featured Movie" class="hero-image">
    <img src="/images/den.jpg" alt="Featured Movie" class="hero-image">

    <!-- Pagination Default-->
    <div class="pagination-default">
        <div class="pagination-dot active"></div>
        <div class="pagination-dot"></div>
        <div class="pagination-dot"></div>
    </div>
</div>

<!-- Now Showing Section -->
<div class="movie-section">
    <h2 class="section-title">Now Showing</h2>
    <div class="movie-grid">
        <!-- Now Showing Movie Cards -->
        <div th:each="movie : ${nowShowingMovies}" class="movie-card">
            <a th:href="@{'/movies/' + ${movie.id}}">
            <div class="movie-poster-container">
                <img th:src="@{'/movies/' + ${movie.id} + '/poster'}" th:alt="${movie.title}" class="movie-poster"/>
            </div>
            <div class="movie-info">
                <div class="movie-meta">
                    <span class="movie-category" th:text="${movie.category}">Horror</span>
                    <span class="movie-release-date" th:text="${#temporals.format(movie.releaseDate, 'dd/MM/yyyy')}">28/02/2025</span>
                    <span class="movie-duration" th:text="${movie.duration + ' min'}">114 min</span>
                </div>
                <div class="movie-title" th:text="${movie.title}">DARK NUNS - T13 - 2D</div>
            </div>
            </a>
        </div>
    </div>

    <!-- Pagination Numbers for Now Showing -->
    <div class="pagination" id="pagibar-now-showing">
        <a href="#" class="prev">‹</a>
        <a th:attr="data-page=${i}"
           th:each="i: ${#numbers.sequence(0, nowShowingPages - 1)}"
           th:href="@{'/now-showing?page=' + ${i}}"
           th:class="${currentNowShowingPage == i ? 'active' : ''}"
           th:text="${i + 1}"></a>
        <a href="#" class="next">›</a>
    </div>
</div>

<!-- Coming Soon Section -->
<div class="movie-section">
    <h2 class="section-title">Coming Soon</h2>
    <div class="movie-grid">
        <!-- Coming Soon Movie Cards -->
        <div th:each="movie : ${comingSoonMovies}" class="movie-card">
            <a th:href="@{'/movies/' + ${movie.id}}">
                <div class="movie-poster-container">
                    <img th:src="@{'/movies/' + ${movie.id} + '/poster'}" th:alt="${movie.title}" class="movie-poster"/>
                </div>
                <div class="movie-info">
                    <div class="movie-meta">
                        <span class="movie-category" th:text="${movie.category}">Adventure</span>
                        <span class="movie-release-date" th:text="${#temporals.format(movie.releaseDate, 'dd/MM/yyyy')}">14/02/2025</span>
                        <span class="movie-duration" th:text="${movie.duration + ' min'}">114 min</span>
                    </div>
                    <div class="movie-title" th:text="${movie.title}">CAPTAIN AMERICA - T13 - 2D</div>
                </div>
            </a>
        </div>
    </div>

    <!-- Pagination Numbers for Coming Soon -->
    <div class="pagination" id="pagibar-coming-soon">
        <a href="#" class="prev">‹</a>
        <a th:attr="data-page=${i}"
           th:each="i: ${#numbers.sequence(0, comingSoonPages - 1)}"
           th:href="@{'/coming-soon?page=' + ${i}}"
           th:class="${currentComingSoonPage == i ? 'active' : ''}"
           th:text="${i + 1}"></a>
        <a href="#" class="next">›</a>
    </div>
</div>

<!-- Footer -->
<div th:replace="fragments/footer :: footer"></div>

<script th:inline="javascript">
<!--    Pagination Default-->
    document.addEventListener('DOMContentLoaded', function () {
            const heroImages = document.querySelectorAll('.hero-image');
            const dots = document.querySelectorAll('.pagination-dot');

            heroImages.forEach((img, index) => {
                if (index === 0) {
                    img.style.display = 'block';
                } else {
                    img.style.display = 'none';
                }
            });

            dots.forEach((dot, index) => {
                dot.addEventListener('click', function () {
                    dots.forEach(d => d.classList.remove('active'));
                    this.classList.add('active');

                    heroImages.forEach(img => {
                        img.style.display = 'none';
                    });

                    heroImages[index].style.display = 'block';
                    currentSlide = index;

                    console.log(`Switched to slide ${index + 1}`);
                });
            });

            let currentSlide = 0;
            setInterval(() => {
                currentSlide = (currentSlide + 1) % dots.length;

                dots.forEach(d => d.classList.remove('active'));
                dots[currentSlide].classList.add('active');

                heroImages.forEach(img => {
                    img.style.display = 'none';
                });

                heroImages[currentSlide].style.display = 'block';

                console.log(`Automatically switched to slide ${currentSlide + 1}`);
            }, 3000);
    });

<!--    Pagination Number-->

</script>
</body>

</html>