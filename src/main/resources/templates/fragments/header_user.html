<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Header Fragment</title>

</head>
<body>
<header class="header" th:fragment="header">
    <div class="container">
        <div class="header-top">
            <img th:src="@{/images/cinema_logo.png}" alt="Cinema Logo" class="logo">
            <div class="user-section">
                <img th:src="${user.userImg}" alt="User Avatar" class="user-avatar"
                     onerror="this.src='/static/images/anonymous.png';">
                <span class="username" th:text="${user.username}">User Name</span>
                <a th:href="@{/logout}" class="logout-btn">Log out</a>
            </div>
        </div>

        <div class="header-bottom">
            <ul class="nav-menu">
                <li><a th:href="@{/home}" th:classappend="${currentPage == 'home' ? 'active' : ''}">Home</a></li>
                <li><a th:href="@{/showtime}" th:classappend="${currentPage == 'showtime' ? 'active' : ''}">Showtime</a></li>
                <li><a th:href="@{/news}" th:classappend="${currentPage == 'news' ? 'active' : ''}">News</a></li>
            </ul>

            <form th:action="@{/user-search}" method="GET" class="search-form">
                <input type="text" name="query" placeholder="Search..." class="search-input">
                <button type="submit" class="search-btn">
                    <i class="fas fa-search search-icon"></i>
                </button>
            </form>
        </div>
    </div>
</header>

<script>
    document.querySelector('.search-form').addEventListener('submit', function(event) {
        const query = document.querySelector('.search-input').value.trim();
        if (!query) {
            event.preventDefault();
        }
    });

    document.querySelector('.search-icon').addEventListener('click', function() {
        document.querySelector('.search-form').submit();
    });
</script>

</body>
</html>
